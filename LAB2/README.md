## 1. Диаграмма системного контекста

**Элементы:**  
- **Информационная система «DeepSand»** – централизованное приложение, объединяющее функции аналитики, мониторинга складских остатков, планирования производства и управления стратегиями продаж.  
- **Пользователи системы:**  
  - **Лаборант:** управляет складскими остатками, анализирует данные о составе сырья.  
  - **Логист:** управляет складскими остатками, просматривает планы производства и клиентскую базу.  
  - **Технолог:** управляет планами производства, создаёт и корректирует производственные планы по стратегиям менеджеров.  
  - **Менеджеры:** управляют клиентской базой и разрабатывают стратегии продаж.

**Связи:**  
- Пользователи взаимодействуют с ИС через веб-интерфейс (например, через корпоративный браузер или специальное клиентское приложение).  
- Все данные, необходимые для работы, хранятся внутри системы (в централизованной базе данных).


## 2. Диаграмма контейнеров

**Элементы и связи:**

- **Веб-приложение (Frontend):**  
  - **Назначение:** Обеспечивает интуитивный графический интерфейс для всех категорий пользователей (Лаборант, Логист, Технолог, Менеджеры).  
  - **Связи:** Пользователи → через браузер/клиентское приложение → Веб-приложение.

- **API Gateway:**  
  - **Назначение:** Выполняет маршрутизацию и предварительную валидацию входящих запросов от веб-приложения, обеспечивая единый входной интерфейс для сервисов системы.  
  - **Связи:** Веб-приложение обращается к API Gateway, который перенаправляет запросы к сервису бизнес-логики.

- **Сервис бизнес-логики (Backend):**  
  - **Назначение:** Реализует основную функциональность ИС, включая управление складом, планирование производства, управление клиентской базой и стратегиями продаж, а также обработку внутренних бизнес-процессов.  
  - **Связи:** API Gateway ↔ Сервис бизнес-логики; Сервис бизнес-логики ↔ База данных; Сервис бизнес-логики ↔ Аналитический сервис.

- **База данных:**  
  - **Назначение:** Централизованное хранилище всех данных (информация о сырье, остатках, планах производства, клиентской базе, заказах).  
  - **Связи:** Сервис бизнес-логики выполняет операции чтения/записи в БД.

- **Аналитический сервис:**  
  - **Назначение:** Сбор и обработка данных для формирования аналитических отчётов, дашбордов и визуализаций для поддержки принятия решений.  
  - **Связи:** Получает данные из базы данных и/или напрямую из сервиса бизнес-логики; результаты передаются через веб-приложение.


## 3. Описание назначения каждого контейнера

- **Веб-приложение (Frontend):**  
  Отвечает за отображение информации, предоставляет формы для ввода данных и визуализацию аналитических отчётов. Интерфейс адаптирован под различные роли:  
  - Лаборанту – для ввода и анализа данных о сырье и остатках.  
  - Логику – для просмотра планов производства и клиентской информации.  
  - Технологу – для управления и корректировки планов производства.  
  - Менеджерам – для управления клиентской базой и стратегиями продаж.

- **API Gateway:**  
  Служит точкой входа для всех запросов. Обеспечивает безопасность (например, аутентификацию), маршрутизацию запросов к соответствующим сервисам и базовую валидацию входящих данных.

- **Сервис бизнес-логики (Backend):**  
  Инкапсулирует реализацию основных бизнес-процессов, распределяя задачи между модулями:  
  - Управление складом (учёт сырья и остатков).  
  - Планирование производства (создание и корректировка планов).  
  - Управление клиентской базой и стратегиями продаж (работа с данными клиентов и настройка продаж).  
  - Внутренняя интеграция данных между модулями.

- **База данных:**  
  Централизованное хранилище всех необходимых данных. Обеспечивает высокую целостность, быстрый доступ и возможность масштабирования хранения по мере роста данных.

- **Аналитический сервис:**  
  Обрабатывает данные из базы данных и бизнес-логики для формирования отчётов, визуализаций и дашбордов, необходимых для оперативного принятия решений пользователями.


## 4. Архитектурный стиль

**Выбранный стиль:**  
Слоистая архитектура (Layered Architecture).


## 5. Причины выбора архитектурного стиля

1. **Четкое разделение ответственности:**  
   Каждый слой (презентационный, бизнес-логики, доступа к данным) выполняет свои задачи, что упрощает разработку, тестирование и поддержку системы.

2. **Упрощение масштабирования и модификации:**  
   При необходимости добавления новых функций (например, расширенной аналитики или новых модулей управления) изменения можно вносить в соответствующий слой без нарушения работы других частей системы.

3. **Легкость интеграции внутренних процессов:**  
   Поскольку все данные хранятся внутри системы, выделение отдельных слоёв позволяет эффективно организовать взаимодействие между модулями (управление складом, планирование производства, управление клиентской базой) через хорошо определенные интерфейсы.


## 6. Диаграмма компонентов контейнера «Сервис бизнес-логики»

**Основные компоненты:**

- **Компонент управления складом:**  
  - **Функции:** Сбор и обновление данных о составе сырья и складских остатках, генерация уведомлений при достижении критических уровней.
  
- **Компонент планирования производства:**  
  - **Функции:** Формирование и корректировка производственных планов, оптимизация загрузки оборудования на основе данных о запасах и стратегиях продаж.
  
- **Компонент управления клиентской базой и стратегиями продаж:**  
  - **Функции:** Обработка и обновление данных о клиентах, управление стратегиями продаж, предоставление инструментов для анализа клиентских сегментов.
  
- **Компонент аналитики (в рамках бизнес-логики):**  
  - **Функции:** Предварительная агрегация данных для формирования аналитических отчётов, обмен информацией с Аналитическим сервисом.

**Связи между компонентами:**  
- Компонент управления складом передает актуальные данные о запасах в компонент планирования производства и компонент аналитики.  
- Компонент управления клиентской базой и стратегиями продаж взаимодействует с компонентом аналитики для формирования сводных отчётов.  
- Все компоненты осуществляют операции чтения и записи данных через абстрактный слой доступа к данным, работающий с базой данных.


## 7. Описание каждого компонента и взаимодействие

- **Компонент управления складом:**  
  - **Что делает:** Сканирует и обновляет информацию о составе сырья, остатках и перемещениях на складе, генерирует сигналы тревоги при достижении критических уровней.  
  - **Взаимодействие:** Получает ввод от Лаборанта и Логиста; передает данные в базу данных и отправляет обновления в компонент аналитики.

- **Компонент планирования производства:**  
  - **Что делает:** Анализирует данные о запасах и информацию о продажах для формирования оптимальных производственных планов; позволяет Технологу корректировать планы с учетом стратегий, предложенных Менеджерами.  
  - **Взаимодействие:** Получает данные из компонента управления складом и модуля стратегий продаж; записывает и обновляет производственные планы в базе данных; отправляет данные в аналитический компонент.

- **Компонент управления клиентской базой и стратегиями продаж:**  
  - **Что делает:** Хранит и обновляет данные о клиентах, разрабатывает стратегии продаж, предоставляет инструменты для сегментации и анализа клиентской базы.  
  - **Взаимодействие:** Менеджеры используют этот компонент для управления клиентами и стратегиями; данные передаются в базу данных и в компонент аналитики для генерации отчетов.

- **Компонент аналитики (внутренний модуль бизнес-логики):**  
  - **Что делает:** Собирает и агрегирует данные из других компонентов, обеспечивает подготовку сводных данных для аналитического сервиса, помогает формировать оперативные отчеты для всех пользователей.  
  - **Взаимодействие:** Получает данные из компонентов управления складом, планирования производства и клиентской базы; передает агрегированные данные аналитическому сервису.

## 8. Дополнительная диаграмма компонентов (Аналитический сервис)

**Элементы аналитического сервиса:**

- **Компонент агрегатора данных:**  
  - **Что делает:** Сбор данных из базы данных и/или напрямую из бизнес-логики для подготовки исходного набора данных для отчетов.
  
- **Компонент построения дашбордов и отчетов:**  
  - **Что делает:** Обрабатывает агрегированные данные для формирования визуальных дашбордов, графиков и подробных отчетов, доступных пользователям через веб-приложение.
  
- **Компонент визуализации:**  
  - **Что делает:** Отвечает за отображение и обновление аналитических данных на фронтенде, обеспечивает интерактивность и динамичное представление информации.

**Связи:**  
- Компонент агрегатора данных получает исходные данные из базы данных и/или от бизнес-логики.  
- Эти данные поступают в компонент построения дашбордов, где они преобразуются в удобные для восприятия отчёты.  
- Компонент визуализации отправляет готовые дашборды в веб-приложение для отображения пользователям.


## 9. Детализация внутренней структуры

**Общая внутренняя структура системы построена по принципу слоистой архитектуры:**

- **Презентационный слой (Frontend):**  
  Отвечает за взаимодействие с пользователями (Лаборант, Логист, Технолог, Менеджеры), обеспечивает ввод данных, отображение отчетов и дашбордов. Интерфейс адаптирован под каждую роль.

- **Слой бизнес-логики (Backend):**  
  Содержит компоненты для управления складом, планирования производства, управления клиентской базой и стратегиями продаж, а также внутренний модуль аналитики. Все компоненты взаимодействуют через четко определенные API и используют абстрактный слой доступа к данным для операций с БД.

- **Слой доступа к данным:**  
  Обеспечивает взаимодействие с централизованной базой данных (например, реляционной СУБД типа PostgreSQL или MS SQL Server), поддерживает транзакционность, целостность данных и резервное копирование.

- **Слой аналитики:**  
  Включает компоненты агрегатора, построения дашбордов и визуализации, позволяющие формировать и представлять аналитические отчеты для оперативного принятия решений.

**Ключевые особенности:**  
- Использование RESTful API для связи между слоями и контейнерами.  
- Внедрение механизмов кэширования, логирования и мониторинга для повышения производительности и надежности.  
- Четкое разделение функциональных зон для упрощения поддержки и модификаций.


Эта архитектура, разработанная по C4 Model с применением слоистой архитектуры, полностью удовлетворяет требованиям ООО «Дипсанд» – все данные хранятся внутри ИС, а функциональные возможности (управление складскими остатками, планирование производства, управление клиентской базой и стратегиями продаж) доступны для ролей Лаборанта, Логиста, Технолога и Менеджеров через интуитивный веб-интерфейс.
